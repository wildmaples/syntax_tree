<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>class SyntaxTree::Statements - RDoc Documentation</title>

<script type="text/javascript">
  var rdoc_rel_prefix = "../";
  var index_rel_prefix = "../";
</script>

<script src="../js/navigation.js" defer></script>
<script src="../js/search.js" defer></script>
<script src="../js/search_index.js" defer></script>
<script src="../js/searcher.js" defer></script>
<script src="../js/darkfish.js" defer></script>

<link href="../css/fonts.css" rel="stylesheet">
<link href="../css/rdoc.css" rel="stylesheet">


<body id="top" role="document" class="class">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="../index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="../table_of_contents.html#pages">Pages</a>
    <a href="../table_of_contents.html#classes">Classes</a>
    <a href="../table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  

  <div id="class-metadata">
    
    
<div id="parent-class-section" class="nav-section">
  <h3>Parent</h3>

  <p class="link"><a href="Node.html">SyntaxTree::Node</a>
</div>

    
    
    
<!-- Method Quickref -->
<div id="method-list-section" class="nav-section">
  <h3>Methods</h3>

  <ul class="link-list" role="directory">
    <li ><a href="#method-c-new">::new</a>
    <li ><a href="#method-i-accept">#accept</a>
    <li ><a href="#method-i-bind">#bind</a>
    <li ><a href="#method-i-bind_end">#bind_end</a>
    <li ><a href="#method-i-child_nodes">#child_nodes</a>
    <li ><a href="#method-i-deconstruct">#deconstruct</a>
    <li ><a href="#method-i-deconstruct_keys">#deconstruct_keys</a>
    <li ><a href="#method-i-empty-3F">#empty?</a>
    <li ><a href="#method-i-format">#format</a>
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-labelledby="class-SyntaxTree::Statements">
  <h1 id="class-SyntaxTree::Statements" class="class">
    class SyntaxTree::Statements
  </h1>

  <section class="description">
    
<p>Everything that has a block of code inside of it has a list of statements. Normally we would just track those as a node that has an array body, but we have some special handling in order to handle empty statement lists. They need to have the right location information, so all of the parent node of stmts nodes will report back down the location information. We then propagate that onto void_stmt nodes inside the stmts in order to make sure all comments get printed appropriately.</p>

  </section>

  <section id="5Buntitled-5D" class="documentation-section">



    <section class="attribute-method-details" class="method-section">
      <header>
        <h3>Attributes</h3>
      </header>

      <div id="attribute-i-body" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">body</span><span
            class="attribute-access-type">[R]</span>
        </div>

        <div class="method-description">
        <dl class="rdoc-list label-list"><dt>Array[ untyped ]
<dd>
<p>the list of expressions contained within this node</p>
</dd></dl>
        </div>
      </div>
      <div id="attribute-i-comments" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">comments</span><span
            class="attribute-access-type">[R]</span>
        </div>

        <div class="method-description">
        <dl class="rdoc-list label-list"><dt>Array[ <a href="Comment.html"><code>Comment</code></a> | <a href="EmbDoc.html"><code>EmbDoc</code></a> ]
<dd>
<p>the comments attached to this node</p>
</dd></dl>
        </div>
      </div>
      <div id="attribute-i-parser" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">parser</span><span
            class="attribute-access-type">[R]</span>
        </div>

        <div class="method-description">
        <dl class="rdoc-list label-list"><dt><a href="../SyntaxTree.html"><code>SyntaxTree</code></a>
<dd>
<p>the parser that is generating this node</p>
</dd></dl>
        </div>
      </div>
    </section>


     <section id="public-class-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Class Methods</h3>
       </header>

      <div id="method-c-new" class="method-detail ">
        <div class="method-heading">
          <span class="method-name">new</span><span
            class="method-args">(parser, body:, location:, comments: [])</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="new-source">
            <pre><span class="ruby-comment"># File lib/syntax_tree/node.rb, line 8080</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">initialize</span>(<span class="ruby-identifier">parser</span>, <span class="ruby-value">body:</span>, <span class="ruby-value">location:</span>, <span class="ruby-value">comments:</span> [])
  <span class="ruby-ivar">@parser</span> = <span class="ruby-identifier">parser</span>
  <span class="ruby-ivar">@body</span> = <span class="ruby-identifier">body</span>
  <span class="ruby-ivar">@location</span> = <span class="ruby-identifier">location</span>
  <span class="ruby-ivar">@comments</span> = <span class="ruby-identifier">comments</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

    </section>

     <section id="public-instance-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Instance Methods</h3>
       </header>

      <div id="method-i-accept" class="method-detail ">
        <div class="method-heading">
          <span class="method-name">accept</span><span
            class="method-args">(visitor)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="accept-source">
            <pre><span class="ruby-comment"># File lib/syntax_tree/node.rb, line 8134</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">accept</span>(<span class="ruby-identifier">visitor</span>)
  <span class="ruby-identifier">visitor</span>.<span class="ruby-identifier">visit_statements</span>(<span class="ruby-keyword">self</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-bind" class="method-detail ">
        <div class="method-heading">
          <span class="method-name">bind</span><span
            class="method-args">(start_char, start_column, end_char, end_column)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="bind-source">
            <pre><span class="ruby-comment"># File lib/syntax_tree/node.rb, line 8087</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">bind</span>(<span class="ruby-identifier">start_char</span>, <span class="ruby-identifier">start_column</span>, <span class="ruby-identifier">end_char</span>, <span class="ruby-identifier">end_column</span>)
  <span class="ruby-ivar">@location</span> =
    <span class="ruby-constant">Location</span>.<span class="ruby-identifier">new</span>(
      <span class="ruby-value">start_line:</span> <span class="ruby-identifier">location</span>.<span class="ruby-identifier">start_line</span>,
      <span class="ruby-value">start_char:</span> <span class="ruby-identifier">start_char</span>,
      <span class="ruby-value">start_column:</span> <span class="ruby-identifier">start_column</span>,
      <span class="ruby-value">end_line:</span> <span class="ruby-identifier">location</span>.<span class="ruby-identifier">end_line</span>,
      <span class="ruby-value">end_char:</span> <span class="ruby-identifier">end_char</span>,
      <span class="ruby-value">end_column:</span> <span class="ruby-identifier">end_column</span>
    )

  <span class="ruby-keyword">if</span> <span class="ruby-identifier">body</span>[<span class="ruby-value">0</span>].<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">VoidStmt</span>)
    <span class="ruby-identifier">location</span> = <span class="ruby-identifier">body</span>[<span class="ruby-value">0</span>].<span class="ruby-identifier">location</span>
    <span class="ruby-identifier">location</span> =
      <span class="ruby-constant">Location</span>.<span class="ruby-identifier">new</span>(
        <span class="ruby-value">start_line:</span> <span class="ruby-identifier">location</span>.<span class="ruby-identifier">start_line</span>,
        <span class="ruby-value">start_char:</span> <span class="ruby-identifier">start_char</span>,
        <span class="ruby-value">start_column:</span> <span class="ruby-identifier">start_column</span>,
        <span class="ruby-value">end_line:</span> <span class="ruby-identifier">location</span>.<span class="ruby-identifier">end_line</span>,
        <span class="ruby-value">end_char:</span> <span class="ruby-identifier">start_char</span>,
        <span class="ruby-value">end_column:</span> <span class="ruby-identifier">end_column</span>
      )

    <span class="ruby-identifier">body</span>[<span class="ruby-value">0</span>] = <span class="ruby-constant">VoidStmt</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">location:</span> <span class="ruby-identifier">location</span>)
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">attach_comments</span>(<span class="ruby-identifier">start_char</span>, <span class="ruby-identifier">end_char</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-bind_end" class="method-detail ">
        <div class="method-heading">
          <span class="method-name">bind_end</span><span
            class="method-args">(end_char, end_column)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="bind_end-source">
            <pre><span class="ruby-comment"># File lib/syntax_tree/node.rb, line 8116</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">bind_end</span>(<span class="ruby-identifier">end_char</span>, <span class="ruby-identifier">end_column</span>)
  <span class="ruby-ivar">@location</span> =
    <span class="ruby-constant">Location</span>.<span class="ruby-identifier">new</span>(
      <span class="ruby-value">start_line:</span> <span class="ruby-identifier">location</span>.<span class="ruby-identifier">start_line</span>,
      <span class="ruby-value">start_char:</span> <span class="ruby-identifier">location</span>.<span class="ruby-identifier">start_char</span>,
      <span class="ruby-value">start_column:</span> <span class="ruby-identifier">location</span>.<span class="ruby-identifier">start_column</span>,
      <span class="ruby-value">end_line:</span> <span class="ruby-identifier">location</span>.<span class="ruby-identifier">end_line</span>,
      <span class="ruby-value">end_char:</span> <span class="ruby-identifier">end_char</span>,
      <span class="ruby-value">end_column:</span> <span class="ruby-identifier">end_column</span>
    )
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-child_nodes" class="method-detail ">
        <div class="method-heading">
          <span class="method-name">child_nodes</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="child_nodes-source">
            <pre><span class="ruby-comment"># File lib/syntax_tree/node.rb, line 8138</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">child_nodes</span>
  <span class="ruby-identifier">body</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>

        <div class="aliases">
          Also aliased as: <a href="Statements.html#method-i-deconstruct">deconstruct</a>
        </div>

      </div>

      <div id="method-i-deconstruct" class="method-detail method-alias">
        <div class="method-heading">
          <span class="method-name">deconstruct</span><span
            class="method-args">()</span>
        </div>

        <div class="method-description">
          

        </div>


        <div class="aliases">
          Alias for: <a href="Statements.html#method-i-child_nodes">child_nodes</a>
        </div>
      </div>

      <div id="method-i-deconstruct_keys" class="method-detail ">
        <div class="method-heading">
          <span class="method-name">deconstruct_keys</span><span
            class="method-args">(_keys)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="deconstruct_keys-source">
            <pre><span class="ruby-comment"># File lib/syntax_tree/node.rb, line 8144</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">deconstruct_keys</span>(<span class="ruby-identifier">_keys</span>)
  { <span class="ruby-value">parser:</span> <span class="ruby-identifier">parser</span>, <span class="ruby-value">body:</span> <span class="ruby-identifier">body</span>, <span class="ruby-value">location:</span> <span class="ruby-identifier">location</span>, <span class="ruby-value">comments:</span> <span class="ruby-identifier">comments</span> }
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-empty-3F" class="method-detail ">
        <div class="method-heading">
          <span class="method-name">empty?</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="empty-3F-source">
            <pre><span class="ruby-comment"># File lib/syntax_tree/node.rb, line 8128</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">empty?</span>
  <span class="ruby-identifier">body</span>.<span class="ruby-identifier">all?</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">statement</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">statement</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">VoidStmt</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">statement</span>.<span class="ruby-identifier">comments</span>.<span class="ruby-identifier">empty?</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-format" class="method-detail ">
        <div class="method-heading">
          <span class="method-name">format</span><span
            class="method-args">(q)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="format-source">
            <pre><span class="ruby-comment"># File lib/syntax_tree/node.rb, line 8148</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">format</span>(<span class="ruby-identifier">q</span>)
  <span class="ruby-identifier">line</span> = <span class="ruby-keyword">nil</span>

  <span class="ruby-comment"># This handles a special case where you&#39;ve got a block of statements where</span>
  <span class="ruby-comment"># the only value is a comment. In that case a lot of nodes like</span>
  <span class="ruby-comment"># brace_block will attempt to format as a single line, but since that</span>
  <span class="ruby-comment"># wouldn&#39;t work with a comment, we intentionally break the parent group.</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">body</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">==</span> <span class="ruby-value">2</span>
    <span class="ruby-identifier">void_stmt</span>, <span class="ruby-identifier">comment</span> = <span class="ruby-identifier">body</span>

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">void_stmt</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">VoidStmt</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">comment</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Comment</span>)
      <span class="ruby-identifier">q</span>.<span class="ruby-identifier">format</span>(<span class="ruby-identifier">comment</span>)
      <span class="ruby-identifier">q</span>.<span class="ruby-identifier">break_parent</span>
      <span class="ruby-keyword">return</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">access_controls</span> =
    <span class="ruby-constant">Hash</span>.<span class="ruby-identifier">new</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">hash</span>, <span class="ruby-identifier">node</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">hash</span>[<span class="ruby-identifier">node</span>] = <span class="ruby-identifier">node</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">VCall</span>) <span class="ruby-operator">&amp;&amp;</span>
        <span class="ruby-node">%w[private protected public]</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">node</span>.<span class="ruby-identifier">value</span>.<span class="ruby-identifier">value</span>)
    <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">body</span>.<span class="ruby-identifier">each_with_index</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">statement</span>, <span class="ruby-identifier">index</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">next</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">statement</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">VoidStmt</span>)

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">line</span>.<span class="ruby-identifier">nil?</span>
      <span class="ruby-identifier">q</span>.<span class="ruby-identifier">format</span>(<span class="ruby-identifier">statement</span>)
    <span class="ruby-keyword">elsif</span> (<span class="ruby-identifier">statement</span>.<span class="ruby-identifier">location</span>.<span class="ruby-identifier">start_line</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">line</span>) <span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span>
      <span class="ruby-identifier">q</span>.<span class="ruby-identifier">breakable</span>(<span class="ruby-value">force:</span> <span class="ruby-keyword">true</span>)
      <span class="ruby-identifier">q</span>.<span class="ruby-identifier">breakable</span>(<span class="ruby-value">force:</span> <span class="ruby-keyword">true</span>)
      <span class="ruby-identifier">q</span>.<span class="ruby-identifier">format</span>(<span class="ruby-identifier">statement</span>)
    <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">access_controls</span>[<span class="ruby-identifier">statement</span>] <span class="ruby-operator">||</span> <span class="ruby-identifier">access_controls</span>[<span class="ruby-identifier">body</span>[<span class="ruby-identifier">index</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>]]
      <span class="ruby-identifier">q</span>.<span class="ruby-identifier">breakable</span>(<span class="ruby-value">force:</span> <span class="ruby-keyword">true</span>)
      <span class="ruby-identifier">q</span>.<span class="ruby-identifier">breakable</span>(<span class="ruby-value">force:</span> <span class="ruby-keyword">true</span>)
      <span class="ruby-identifier">q</span>.<span class="ruby-identifier">format</span>(<span class="ruby-identifier">statement</span>)
    <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">statement</span>.<span class="ruby-identifier">location</span>.<span class="ruby-identifier">start_line</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">line</span>
      <span class="ruby-identifier">q</span>.<span class="ruby-identifier">breakable</span>(<span class="ruby-value">force:</span> <span class="ruby-keyword">true</span>)
      <span class="ruby-identifier">q</span>.<span class="ruby-identifier">format</span>(<span class="ruby-identifier">statement</span>)
    <span class="ruby-keyword">elsif</span> <span class="ruby-operator">!</span><span class="ruby-identifier">q</span>.<span class="ruby-identifier">parent</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">StringEmbExpr</span>)
      <span class="ruby-identifier">q</span>.<span class="ruby-identifier">breakable</span>(<span class="ruby-value">force:</span> <span class="ruby-keyword">true</span>)
      <span class="ruby-identifier">q</span>.<span class="ruby-identifier">format</span>(<span class="ruby-identifier">statement</span>)
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">q</span>.<span class="ruby-identifier">text</span>(<span class="ruby-string">&quot;; &quot;</span>)
      <span class="ruby-identifier">q</span>.<span class="ruby-identifier">format</span>(<span class="ruby-identifier">statement</span>)
    <span class="ruby-keyword">end</span>

    <span class="ruby-identifier">line</span> = <span class="ruby-identifier">statement</span>.<span class="ruby-identifier">location</span>.<span class="ruby-identifier">end_line</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

    </section>

  </section>
</main>


<footer id="validator-badges" role="contentinfo">
  <p><a href="https://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="https://ruby.github.io/rdoc/">RDoc</a> 6.4.0.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-RDoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

